/*! virtual-pointer - v0.0.1 - 2013-07-01
* https://github.com/ngryman/virtual-pointer
* Copyright (c) 2013 Nicolas Gryman; Licensed MIT */
(function(t,i){var e="ontouchstart"in i,s=e?"touchstart":"mousedown",o=e?"touchend":"mouseup",n=e?"touchmove":"mousemove";t.each("click mousedown mouseup mousemove mouseleave touchstart touchmove touchend".split(" "),function(i,e){t.event.special[e]={add:function(t){var i=t.handler;t.handler=function(t){t.isTrigger&&i.apply(this,arguments)}}}}),i.VirtualPointer=function(i){return{x:0,y:0,autoReset:!0,trigger:function(i){var e=t(document.elementFromPoint(this.x,this.y));e.trigger(new t.Event(i,{pageX:this.x,pageY:this.y,originalEvent:{touches:[{pageX:this.x,pageY:this.y}]}}))},tapStart:function(i){if(this.autoReset&&(this.x=this.y=0),i){var e=t(i).offset();this.x=e.left,this.y=e.top}this.trigger(s)},tapEnd:function(i){if(i){var e=t(i).offset();this.x=e.left,this.y=e.top}this.trigger(o)},click:function(i){if(i){var e=t(i).offset();this.x=e.left,this.y=e.top}this.trigger("click")},move:function(e,s,o,h){var a,r,u=Date.now(),f=0;"number"!=typeof e&&(h=o,o=s,r=t(e).offset(),e=r.left,s=r.top),this.tapStart();var c=this.x,p=this.y;(function l(){var t=Date.now();return f+=t-u,f>o?((e!=this.x||s!=this.y)&&(this.x=c+e,this.y=p+s,this.trigger(n)),this.tapEnd(),h&&h.call(i),void 0):(u=t,this.x=Math.ceil(f/o*e)+c,this.y=Math.ceil(f/o*s)+p,this.trigger(n),a=setTimeout(l.bind(this),0),void 0)}).bind(this)()},tap:function(t){this.tapStart(t),this.tapEnd(t)},press:function(t,e,s){e=e||1.5*this.PRESS_DURATION,this.tapStart(s),setTimeout(function(){this.tapEnd(s),t&&t.call(i)}.bind(this),e)},doubleTap:function(t,e,s){e=e||.5*this.DOUBLETAP_DURATION,this.tap(s),setTimeout(function(){this.tap(s),t&&t.call(i)}.bind(this),e)},drag:function(i,e,s,o){var n;"number"!=typeof i&&(o=s,s=e,n=t(i).offset(),i=n.left,e=n.top),o=o||1.5*this.FLICK_DURATION,this.move(i,e,o,s)},flick:function(i,e,s,o){var n;"number"!=typeof i&&(o=s,s=e,n=t(i).offset(),i=n.left,e=n.top),o=o||.5*this.FLICK_DURATION,this.move(i,e,o,s)},START_EVENT:s,STOP_EVENT:o,MOVE_EVENT:n,PRESS_DURATION:25,DOUBLETAP_DURATION:25,FLICK_DURATION:25}}})(jQuery,window);